{
    "info": {
        "name": "Storage Platform API",
        "description": "API collection for the Storage Platform (Drive) application.\n\n## Setup\n1. Import this collection into Postman\n2. Set the `baseUrl` variable to `http://localhost:5000`\n3. Register a user, then login to get a token\n4. The token auto-saves to the `token` variable\n\n## Auth Flow\nAll endpoints except Register, Login, and Public require the Bearer token.",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "variable": [
        {
            "key": "baseUrl",
            "value": "http://localhost:5000"
        },
        {
            "key": "token",
            "value": ""
        }
    ],
    "item": [
        {
            "name": "Auth",
            "description": "Authentication endpoints for user registration and login.",
            "item": [
                {
                    "name": "Register",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"password123\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/auth/register",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "register"
                            ]
                        },
                        "description": "Create a new user account.\n\n**Request:**\n- `email` (string, required): User email\n- `password` (string, required): Min 6 characters\n\n**Response:**\n- `token`: JWT token for authentication\n- `user`: User object with id, email, role"
                    },
                    "response": []
                },
                {
                    "name": "Login",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "var jsonData = pm.response.json();",
                                    "if (jsonData.token) {",
                                    "    pm.collectionVariables.set('token', jsonData.token);",
                                    "    console.log('Token saved to collection variables');",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"password123\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/auth/login",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "login"
                            ]
                        },
                        "description": "Login with existing credentials.\n\n**Note:** The token is automatically saved to collection variables on success.\n\n**Request:**\n- `email` (string, required)\n- `password` (string, required)\n\n**Response:**\n- `token`: JWT token (valid for 7 days)\n- `user`: User object"
                    },
                    "response": []
                },
                {
                    "name": "Get Current User",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/api/auth/me",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "me"
                            ]
                        },
                        "description": "Get the currently authenticated user's details.\n\n**Authorization:** Bearer token required\n\n**Response:**\n- `user`: { id, email, role }"
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Folders",
            "description": "CRUD operations for folders. All endpoints require authentication.",
            "item": [
                {
                    "name": "Get All Root Folders",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/api/folders",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "folders"
                            ]
                        },
                        "description": "Get all top-level folders (folders without a parent).\n\n**Authorization:** Bearer token required\n\n**Response:** Array of folder objects"
                    },
                    "response": []
                },
                {
                    "name": "Get Folder by ID",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/api/folders/:id",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "folders",
                                ":id"
                            ],
                            "variable": [
                                {
                                    "key": "id",
                                    "value": "FOLDER_ID_HERE",
                                    "description": "Folder ID"
                                }
                            ]
                        },
                        "description": "Get a specific folder with its subfolders, files, and breadcrumb path.\n\n**Authorization:** Bearer token required\n\n**Response:**\n- `folder`: Folder object\n- `subfolders`: Array of child folders\n- `files`: Array of files in this folder\n- `breadcrumb`: Array of { id, name } for navigation"
                    },
                    "response": []
                },
                {
                    "name": "Create Folder",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"My New Folder\",\n  \"parentId\": null\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/folders",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "folders"
                            ]
                        },
                        "description": "Create a new folder.\n\n**Authorization:** Bearer token required\n\n**Request:**\n- `name` (string, required): Folder name\n- `parentId` (string, optional): Parent folder ID. Omit or null for root folder.\n\n**Response:** Created folder object"
                    },
                    "response": []
                },
                {
                    "name": "Rename Folder",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"Renamed Folder\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/folders/:id",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "folders",
                                ":id"
                            ],
                            "variable": [
                                {
                                    "key": "id",
                                    "value": "FOLDER_ID_HERE"
                                }
                            ]
                        },
                        "description": "Rename an existing folder.\n\n**Authorization:** Bearer token required\n\n**Request:**\n- `name` (string, required): New folder name\n\n**Response:** Updated folder object"
                    },
                    "response": []
                },
                {
                    "name": "Delete Folder",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/api/folders/:id",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "folders",
                                ":id"
                            ],
                            "variable": [
                                {
                                    "key": "id",
                                    "value": "FOLDER_ID_HERE"
                                }
                            ]
                        },
                        "description": "Delete a folder and ALL its contents (subfolders and files) recursively.\n\n**Authorization:** Bearer token required\n\n**⚠️ Warning:** This action cannot be undone.\n\n**Response:** { message: 'Folder deleted successfully' }"
                    },
                    "response": []
                },
                {
                    "name": "Share Folder",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/api/folders/:id/share",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "folders",
                                ":id",
                                "share"
                            ],
                            "variable": [
                                {
                                    "key": "id",
                                    "value": "FOLDER_ID_HERE"
                                }
                            ]
                        },
                        "description": "Generate a public share link for a folder.\n\n**Authorization:** Bearer token required\n\n**Response:**\n- `shareId`: UUID for public access\n- `shareUrl`: Path to access shared content"
                    },
                    "response": []
                },
                {
                    "name": "Unshare Folder",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/api/folders/:id/share",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "folders",
                                ":id",
                                "share"
                            ],
                            "variable": [
                                {
                                    "key": "id",
                                    "value": "FOLDER_ID_HERE"
                                }
                            ]
                        },
                        "description": "Revoke the public share link for a folder.\n\n**Authorization:** Bearer token required\n\n**Response:** { message: 'Share link revoked' }"
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Files",
            "description": "File upload and management. All endpoints require authentication.",
            "item": [
                {
                    "name": "Get Files in Folder",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/api/files/folder/:folderId",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "files",
                                "folder",
                                ":folderId"
                            ],
                            "variable": [
                                {
                                    "key": "folderId",
                                    "value": "FOLDER_ID_HERE"
                                }
                            ]
                        },
                        "description": "Get all files within a specific folder.\n\n**Authorization:** Bearer token required\n\n**Response:** Array of file objects"
                    },
                    "response": []
                },
                {
                    "name": "Upload File",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            }
                        ],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "file",
                                    "type": "file",
                                    "description": "The file to upload"
                                },
                                {
                                    "key": "folderId",
                                    "value": "FOLDER_ID_HERE",
                                    "type": "text",
                                    "description": "Target folder ID"
                                }
                            ]
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/files",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "files"
                            ]
                        },
                        "description": "Upload a file to a folder.\n\n**Authorization:** Bearer token required\n\n**Content-Type:** multipart/form-data\n\n**Form Fields:**\n- `file` (file, required): The file to upload\n- `folderId` (string, required): Target folder ID\n\n**Response:** Created file object with:\n- `name`: Saved filename (UUID + extension)\n- `originalName`: Original filename\n- `url`: Path to access the file\n- `mimeType`: File MIME type\n- `size`: File size in bytes"
                    },
                    "response": []
                },
                {
                    "name": "Rename File",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"new-filename.pdf\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/files/:id",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "files",
                                ":id"
                            ],
                            "variable": [
                                {
                                    "key": "id",
                                    "value": "FILE_ID_HERE"
                                }
                            ]
                        },
                        "description": "Rename a file (display name only, not the stored filename).\n\n**Authorization:** Bearer token required\n\n**Request:**\n- `name` (string, required): New display name\n\n**Response:** Updated file object"
                    },
                    "response": []
                },
                {
                    "name": "Delete File",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/api/files/:id",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "files",
                                ":id"
                            ],
                            "variable": [
                                {
                                    "key": "id",
                                    "value": "FILE_ID_HERE"
                                }
                            ]
                        },
                        "description": "Delete a file (both database record and physical file).\n\n**Authorization:** Bearer token required\n\n**Response:** { message: 'File deleted successfully' }"
                    },
                    "response": []
                },
                {
                    "name": "Share File",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/api/files/:id/share",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "files",
                                ":id",
                                "share"
                            ],
                            "variable": [
                                {
                                    "key": "id",
                                    "value": "FILE_ID_HERE"
                                }
                            ]
                        },
                        "description": "Generate a public share link for a file.\n\n**Authorization:** Bearer token required\n\n**Response:**\n- `shareId`: UUID for public access\n- `shareUrl`: Path to access shared file"
                    },
                    "response": []
                },
                {
                    "name": "Unshare File",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/api/files/:id/share",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "files",
                                ":id",
                                "share"
                            ],
                            "variable": [
                                {
                                    "key": "id",
                                    "value": "FILE_ID_HERE"
                                }
                            ]
                        },
                        "description": "Revoke the public share link for a file.\n\n**Authorization:** Bearer token required\n\n**Response:** { message: 'Share link revoked' }"
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Public",
            "description": "Public access endpoints for shared content. No authentication required.",
            "item": [
                {
                    "name": "Get Shared Content",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/public/:shareId",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "public",
                                ":shareId"
                            ],
                            "variable": [
                                {
                                    "key": "shareId",
                                    "value": "SHARE_ID_HERE",
                                    "description": "The share ID from a share link"
                                }
                            ]
                        },
                        "description": "Access shared folder or file content.\n\n**No authentication required.**\n\n**Response for Folder:**\n- `type`: 'folder'\n- `folder`: Folder details\n- `subfolders`: Child folders\n- `files`: Files in folder\n\n**Response for File:**\n- `type`: 'file'\n- `file`: File details including download URL"
                    },
                    "response": []
                }
            ]
        }
    ]
}