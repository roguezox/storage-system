# ═══════════════════════════════════════════════════════════════════════════
# OpenDrive Environment Configuration - Google Cloud Storage
# ═══════════════════════════════════════════════════════════════════════════
#
# Copy this file to .env and fill in your values
# cp .env.gcs.example .env
#

# ─────────────────────────────────────────────────────────────────────────────
# Application Configuration
# ─────────────────────────────────────────────────────────────────────────────
NODE_ENV=production
PORT=5000

# ─────────────────────────────────────────────────────────────────────────────
# Database Configuration
# ─────────────────────────────────────────────────────────────────────────────
# For local MongoDB
MONGODB_URI=mongodb://localhost:27017/opendrive

# For MongoDB Atlas (production)
# MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/opendrive

# For Docker Compose
# MONGODB_URI=mongodb://mongo:27017/opendrive

# ─────────────────────────────────────────────────────────────────────────────
# Security
# ─────────────────────────────────────────────────────────────────────────────
# Generate with: openssl rand -base64 32
JWT_SECRET=your-secret-key-here-change-this

# ─────────────────────────────────────────────────────────────────────────────
# Storage Configuration - GOOGLE CLOUD STORAGE
# ─────────────────────────────────────────────────────────────────────────────
STORAGE_PROVIDER=gcs

# Your GCP Project ID (found in GCP Console)
GCS_PROJECT_ID=your-project-id

# GCS Bucket name (create with: gcloud storage buckets create gs://bucket-name)
GCS_BUCKET=opendrive-production

# Path to service account key JSON file
# Generate with: gcloud iam service-accounts keys create key.json --iam-account=...
GCS_KEYFILE=/path/to/service-account-key.json

# Alternative: Use GOOGLE_APPLICATION_CREDENTIALS instead of GCS_KEYFILE
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# Storage class (optional, default: STANDARD)
# Options: STANDARD, NEARLINE, COLDLINE, ARCHIVE
GCS_STORAGE_CLASS=STANDARD

# ─────────────────────────────────────────────────────────────────────────────
# Alternative: AWS S3 Configuration
# ─────────────────────────────────────────────────────────────────────────────
# Uncomment to use AWS S3 instead of GCS
#
# STORAGE_PROVIDER=s3
# S3_BUCKET=opendrive-bucket
# S3_REGION=us-east-1
# S3_ACCESS_KEY=AKIAIOSFODNN7EXAMPLE
# S3_SECRET_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY

# ─────────────────────────────────────────────────────────────────────────────
# Alternative: MinIO Configuration (local S3-compatible)
# ─────────────────────────────────────────────────────────────────────────────
# Uncomment to use MinIO instead of GCS
#
# STORAGE_PROVIDER=s3
# S3_ENDPOINT=http://localhost:9000
# S3_BUCKET=opendrive
# S3_ACCESS_KEY=minioadmin
# S3_SECRET_KEY=minioadmin

# ─────────────────────────────────────────────────────────────────────────────
# Deployment Mode
# ─────────────────────────────────────────────────────────────────────────────
# Options: monolith, microservices
DEPLOYMENT_MODE=monolith

# ─────────────────────────────────────────────────────────────────────────────
# Kafka Configuration (only for microservices mode)
# ─────────────────────────────────────────────────────────────────────────────
# Uncomment if DEPLOYMENT_MODE=microservices
#
# KAFKA_BROKERS=pkc-xxxxx.us-central1.gcp.confluent.cloud:9092
# KAFKA_API_KEY=your-kafka-api-key
# KAFKA_API_SECRET=your-kafka-api-secret
# KAFKA_SASL_USERNAME=your-kafka-username
# KAFKA_SASL_PASSWORD=your-kafka-password

# ─────────────────────────────────────────────────────────────────────────────
# Logging Configuration (optional)
# ─────────────────────────────────────────────────────────────────────────────
# Enable debug mode for GCS
# GCLOUD_DEBUG=true

# Log level: error, warn, info, debug
LOG_LEVEL=info

# ─────────────────────────────────────────────────────────────────────────────
# CORS Configuration (optional)
# ─────────────────────────────────────────────────────────────────────────────
# Comma-separated list of allowed origins
# ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com

# ═══════════════════════════════════════════════════════════════════════════
# SETUP INSTRUCTIONS
# ═══════════════════════════════════════════════════════════════════════════
#
# 1. Create GCS bucket:
#    gcloud storage buckets create gs://opendrive-production \
#      --location=us-central1 \
#      --uniform-bucket-level-access
#
# 2. Create service account:
#    gcloud iam service-accounts create opendrive-storage \
#      --display-name="OpenDrive Storage"
#
# 3. Grant permissions:
#    gcloud storage buckets add-iam-policy-binding gs://opendrive-production \
#      --member="serviceAccount:opendrive-storage@PROJECT_ID.iam.gserviceaccount.com" \
#      --role="roles/storage.objectAdmin"
#
# 4. Create and download key:
#    gcloud iam service-accounts keys create ./gcs-key.json \
#      --iam-account=opendrive-storage@PROJECT_ID.iam.gserviceaccount.com
#
# 5. Update this file with your values
#
# 6. Install dependencies:
#    npm install
#
# 7. Start server:
#    npm start
#
# For detailed setup instructions, see: GCS_SETUP_GUIDE.md
#
# ═══════════════════════════════════════════════════════════════════════════
